{"ast":null,"code":"var _jsxFileName = \"D:\\\\S6 BCA B\\\\edwin\\\\front-rep-almost-main\\\\src\\\\components\\\\Home\\\\Orders.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Orders = () => {\n  _s();\n  const [username, setUsername] = useState('');\n  const [userId, setUserId] = useState('');\n  const [orders, setOrders] = useState([]);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const getToken = () => {\n      return localStorage.getItem('token');\n    };\n    const token = getToken();\n    if (!token) {\n      navigate('/login');\n    } else {\n      console.log('Token fetched:', token);\n      const payload = token.split('.')[1];\n      console.log('Token Payload:', payload); // Log the token payload for debugging\n      try {\n        const decodedPayload = atob(payload);\n        console.log('Decoded Payload:', decodedPayload); // Log the decoded payload for debugging\n\n        // Extract 'id' as 'userId' and 'username' from decoded payload\n        const {\n          id: userId,\n          username: decodedUsername\n        } = JSON.parse(decodedPayload);\n        console.log('User Id:', userId); // Log the extracted user ID for debugging\n        console.log('Username:', decodedUsername); // Log the extracted username for debugging\n\n        // Set the extracted username to the state variable\n        setUsername(decodedUsername);\n        setUserId(userId);\n\n        // Fetch orders by userId\n        const fetchOrders = async () => {\n          try {\n            const response = await axios.get(`/api/orders/${userId}`);\n            setOrders(response.data.orders);\n          } catch (error) {\n            console.error('Error fetching orders:', error);\n          }\n        };\n        fetchOrders();\n        // Optionally, you can also set the email state variable if it's available in the payload\n        // setEmail(decodedEmail);\n      } catch (error) {\n        console.error('Error decoding token payload:', error);\n      }\n    }\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"alo\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n_s(Orders, \"lnMmTJ5T83lG59KOk4p1tjtcUoQ=\", false, function () {\n  return [useNavigate];\n});\n_c = Orders;\nexport default Orders;\nvar _c;\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsxDEV","_jsxDEV","Orders","_s","username","setUsername","userId","setUserId","orders","setOrders","navigate","getToken","localStorage","getItem","token","console","log","payload","split","decodedPayload","atob","id","decodedUsername","JSON","parse","fetchOrders","response","axios","get","data","error","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/S6 BCA B/edwin/front-rep-almost-main/src/components/Home/Orders.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Orders = () => {\r\n    const [username, setUsername] = useState('');\r\n    const [userId, setUserId] = useState('');\r\n    const [orders, setOrders] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const getToken = () => {\r\n            return localStorage.getItem('token');\r\n        };\r\n    \r\n        const token = getToken();\r\n        if (!token) {\r\n            navigate('/login');\r\n        } else {\r\n            console.log('Token fetched:', token);\r\n            const payload = token.split('.')[1];\r\n            console.log('Token Payload:', payload); // Log the token payload for debugging\r\n            try {\r\n                const decodedPayload = atob(payload);\r\n                console.log('Decoded Payload:', decodedPayload); // Log the decoded payload for debugging\r\n                \r\n                // Extract 'id' as 'userId' and 'username' from decoded payload\r\n                const { id: userId, username: decodedUsername } = JSON.parse(decodedPayload);\r\n                console.log('User Id:', userId); // Log the extracted user ID for debugging\r\n                console.log('Username:', decodedUsername); // Log the extracted username for debugging\r\n                \r\n                // Set the extracted username to the state variable\r\n                setUsername(decodedUsername);\r\n                setUserId(userId);\r\n\r\n                 // Fetch orders by userId\r\n        const fetchOrders = async () => {\r\n            try {\r\n              const response = await axios.get(`/api/orders/${userId}`);\r\n              setOrders(response.data.orders);\r\n            } catch (error) {\r\n              console.error('Error fetching orders:', error);\r\n            }\r\n          };\r\n          fetchOrders();\r\n                // Optionally, you can also set the email state variable if it's available in the payload\r\n                // setEmail(decodedEmail);\r\n            } catch (error) {\r\n                console.error('Error decoding token payload:', error);\r\n            }\r\n        }\r\n    }, []);\r\n\r\n\r\n  return (\r\n    <div>\r\n      alo\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Orders\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,MAAM,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACjB,MAAM,CAACC,QAAQ,EAAEC,WAAW,CAAC,GAAGP,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACQ,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAM,CAACU,MAAM,EAAEC,SAAS,CAAC,GAAGX,QAAQ,CAAC,EAAE,CAAC;EACxC,MAAMY,QAAQ,GAAGX,WAAW,CAAC,CAAC;EAE9BF,SAAS,CAAC,MAAM;IACZ,MAAMc,QAAQ,GAAGA,CAAA,KAAM;MACnB,OAAOC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IACxC,CAAC;IAED,MAAMC,KAAK,GAAGH,QAAQ,CAAC,CAAC;IACxB,IAAI,CAACG,KAAK,EAAE;MACRJ,QAAQ,CAAC,QAAQ,CAAC;IACtB,CAAC,MAAM;MACHK,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEF,KAAK,CAAC;MACpC,MAAMG,OAAO,GAAGH,KAAK,CAACI,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;MACnCH,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEC,OAAO,CAAC,CAAC,CAAC;MACxC,IAAI;QACA,MAAME,cAAc,GAAGC,IAAI,CAACH,OAAO,CAAC;QACpCF,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEG,cAAc,CAAC,CAAC,CAAC;;QAEjD;QACA,MAAM;UAAEE,EAAE,EAAEf,MAAM;UAAEF,QAAQ,EAAEkB;QAAgB,CAAC,GAAGC,IAAI,CAACC,KAAK,CAACL,cAAc,CAAC;QAC5EJ,OAAO,CAACC,GAAG,CAAC,UAAU,EAAEV,MAAM,CAAC,CAAC,CAAC;QACjCS,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEM,eAAe,CAAC,CAAC,CAAC;;QAE3C;QACAjB,WAAW,CAACiB,eAAe,CAAC;QAC5Bf,SAAS,CAACD,MAAM,CAAC;;QAEhB;QACT,MAAMmB,WAAW,GAAG,MAAAA,CAAA,KAAY;UAC5B,IAAI;YACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAACC,GAAG,CAAE,eAActB,MAAO,EAAC,CAAC;YACzDG,SAAS,CAACiB,QAAQ,CAACG,IAAI,CAACrB,MAAM,CAAC;UACjC,CAAC,CAAC,OAAOsB,KAAK,EAAE;YACdf,OAAO,CAACe,KAAK,CAAC,wBAAwB,EAAEA,KAAK,CAAC;UAChD;QACF,CAAC;QACDL,WAAW,CAAC,CAAC;QACP;QACA;MACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;QACZf,OAAO,CAACe,KAAK,CAAC,+BAA+B,EAAEA,KAAK,CAAC;MACzD;IACJ;EACJ,CAAC,EAAE,EAAE,CAAC;EAGR,oBACE7B,OAAA;IAAA8B,QAAA,EAAK;EAEL;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;AAEV,CAAC;AAAAhC,EAAA,CAvDKD,MAAM;EAAA,QAISH,WAAW;AAAA;AAAAqC,EAAA,GAJ1BlC,MAAM;AAyDZ,eAAeA,MAAM;AAAA,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}